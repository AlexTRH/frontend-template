# Паттерны UI

Когда использовать empty/loading/error, формы create vs edit, Card/Sheet/Dialog и как не дублировать разметку.

---

## Empty / Loading / Error

| Состояние   | Когда                             | Пример в шаблоне                                                                                                          |
| ----------- | --------------------------------- | ------------------------------------------------------------------------------------------------------------------------- |
| **Loading** | Запрос в процессе                 | `TableSkeleton`, `CardSkeleton`, `PageLoader`, спиннер в кнопке                                                           |
| **Empty**   | Список пуст или ничего не найдено | `EmptyState` (иконка + заголовок + опционально кнопка). Items: пустой список, «No matches»; Item detail: «Item not found» |
| **Error**   | Запрос упал или ошибка валидации  | `Error` (shared/ui/errors), toast от API interceptor, `FormMessage` под полем                                             |

**Правило:** не показывать контент до готовности данных. Пока `isLoading` — скелетон или лоадер; при пустом результате — EmptyState с понятным текстом и действием (например «Создать»).

---

## Форма: create vs edit

| Сценарий   | Где                                     | Особенности                                                                                                      |
| ---------- | --------------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| **Create** | Модалка (Dialog) или отдельная страница | `defaultValues` пустые; после успеха — закрыть модалку и инвалидировать список (`queryClient.invalidateQueries`) |
| **Edit**   | Модалка или страница `/items/:id/edit`  | `defaultValues` из сущности; после успеха — инвалидировать список и деталь; при модалке — закрыть                |

**Общее:** одна схема валидации (Zod), `react-hook-form`, `zodResolver`. Ошибки с бэкенда (422) маппить в `form.setError('fieldName', { message })` через хелпер (см. shared/api или features).

---

## Card / Sheet / Dialog

| Компонент       | Когда использовать                                                                                       |
| --------------- | -------------------------------------------------------------------------------------------------------- |
| **Card**        | Блок контента на странице: стат-карточка, блок с таблицей, форма в настройках. Не для модальных окон.    |
| **Sheet**       | Боковая панель: фильтры, детали, доп. действия. На мобиле — меню навигации. Выезжает сбоку.              |
| **Dialog**      | Модальное окно по центру: форма создания/редактирования, подтверждение (или AlertDialog). Блокирует фон. |
| **AlertDialog** | Только подтверждение «Да/Нет» без сложной формы. Не закрывается по клику снаружи.                        |

**Правило:** форма в модалке — Dialog; длинный контент или фильтры — Sheet; контент страницы — Card.

---

## Не дублировать разметку

- **Empty state:** использовать `EmptyState` (shared/ui/empty-state): передаёшь иконку, заголовок, опционально описание и кнопку.
- **Пагинация:** использовать `Pagination` (shared/ui/pagination): текущая страница, всего страниц, onPageChange.
- **Спиннер в кнопке:** `mutation.isPending` и текст «Создаём…» / «Сохраняем…» из i18n.
- **Breadcrumbs:** один компонент `Breadcrumbs`, массив `items: { label, to? }`.

См. также: `docs/WHICH-COMPONENT-WHEN.md`, `docs/EXAMPLES-IN-TEMPLATE.md`.
